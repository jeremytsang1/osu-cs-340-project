#+OPTIONS: toc:nil num:nil tasks:nil ^:nil
#+TITLE: OSU CS 340 Final Project: Empire Employees
#+AUTHOR: Kyle Bell and Jeremy Tsang
#+LATEX_HEADER: \usepackage[margin=1.0in]{geometry}
* Table of Contents
:PROPERTIES:
:TOC:      :include all :ignore (this)
:END:
:CONTENTS:
- [[#project-outline][Project Outline]]
- [[#database-outline][Database Outline]]
  - [[#entity-tables][Entity Tables]]
    - [[#troopers][troopers]]
    - [[#ships][ships]]
    - [[#droids][droids]]
    - [[#loadouts][loadouts]]
    - [[#garrisons][garrisons]]
  - [[#relationship-tables][Relationship Tables]]
    - [[#ships_troopers][ships_troopers]]
    - [[#ships_droids][ships_droids]]
- [[#erd][ERD]]
- [[#schema][Schema]]
- [[#installation-and-usage][Installation and Usage]]
  - [[#install-dependencies-with-npm][Install dependencies with npm]]
  - [[#credentials][Credentials]]
  - [[#setup-initial-database][Setup initial database]]
  - [[#run-the-app][Run the app]]
:END:
* Project Outline
Empire Employees is a database driven web application designed to manage
stormtroopers, garrisons, ships, and droids under the Galactic Empire. It does this by providing
a listing of each of the above entities as well as allowing users to add/modify/delete entities. For
modifying these entities, we allow troopers to be moved around to various garrisons (or no
garrisons at all if they are in transit). Their equipment, modeled by the Loadouts entity, can also
be updated as well. We can move troopers/droids from ship to ship as well and in this case
these relationships are modeled by a M:M relationship. Stormtroopers can also be deleted from
the database if they have fulfilled their purpose and given their lives for the Empire.

The glorious Galactic Empire has 1.5 million planets under its control which includes 69
million different colonies and states. Without proper organization and resolve the galaxy will turn
to chaos, or worse, become under the control of rebel scum. Empire Employees is capable of
managing all 1 billion Stormtroopers, 25,000 Star Destroyers and other smaller vehicles, as well
as droids that the Empire employs. There are 11 vehicles types and 20 droid types currently
supported. Each stormtrooper is equipped with a loadout that contains 1 out of 7 blasters and 1
out of 2 detonator grenades. To deploy a specific number of troops to ensure effective defense
of each garrison spread such large cosmic distances it is critical to always have the correct
number of supplies and personnel available. Empire Employees does this by allowing the users
current troop, ship, and droid counts for each garrison and providing sufficient warnings when
said counts drop below an acceptable level needed for adequate defense. For some ships, such
as tie fighters, there may only be 1 trooper on board whereas for larger ships, such as star
destroyers, may have as much as 9,700 Stormtroopers. With our simple to use online interface,
we will meet all your Stormtrooper relocation management needs!
* Database Outline
** Entity Tables
*** ~troopers~
An individual soldier of the Galactic Empire that upholds peace and prosperity
for all. They have a garrison and load out assignments that are related to the garrisons
and loadouts entities respectively.

- ~id~: int, auto_increment, unique, not NULL, PK
- ~garrison~: int, FK
- ~loadout~: int, not NULL, FK
- Relationship: a 1:M relationship between garrisons and troopers, a M:M relationship between troopers and ships (implemented with the ships_troopers composite entity), and a 1:M relationship between loadouts and troopers.
*** ~ships~
The Galactic Empire has ships in order to transport troopers and droids
throughout the galax. Each ship has a ship type and is related to troopers and droids.

- ~id~ : int, auto_increment, unique, not NULL, PK
- ~type~: varchar(255), not NULL
- Relationship: a M:M relationship between ships and troopers, a M:M relationship between ships and droids.
*** ~droids~
Robust, top of the line droids help repair ships for our glorious fleet. They have a droid type, and have a relationship with ships.

- ~id~: int, auto_increment, unique, not NULL, PK
- ~type~: varchar(255), not NULL
- Relationship: a M:M relationship between droids and ships implemented with the ships_droids composite entity.
*** ~loadouts~
Each unique weapon loadout contains a proprietary blaster as well as an
option for a detonator in order for each trooper to get the job done right their own way! A
loadout has a relationship with a trooper.

- ~id~: int, auto_increment, unique, not NULL, PK
- ~blaster~: varchar(255), not NULL
- ~detonator~: bool, not NULL
- Relationship: a 1:M relationship between loadouts and trooper
*** ~garrisons~
Our Empire keeps the galaxy safe with garrisons throughout the galaxy. Each
of them has a name and a maximum capacity.

- ~id~ : int, auto_increment, unique, not NULL, PK
- ~name~: varchar(255), not NULL UNIQUE
- ~capacity~: int, not NULL
- Relationship: a 1:M relationship is implemented between troops and garrisons as a FK inside of troops.
** Relationship Tables
*** ~ships_troopers~
 Relationship between ships and troopers.

- ~ship~: int, not NULL, PK, FK
- ~trooper~: int, not NULL, PK, FK
- Relationship: facilitates M:M relationship between ships and troopers.
*** ~ships_droids~
Relationship between ships and droids.

- ~ship~: int, not NULL, PK, FK
- ~droid~ : int, not NULL, PK, FK
- Relationship: facilitates M:M relationship between ships and droids.
* ERD
[[file:steps/2/draft/erd/step-2-draft-erd.png]]
* Schema
[[file:steps/2/draft/schema/step-2-schema.png]]
* Installation and Usage
** Install dependencies with npm
- after cloning the repository navigate to the app directory
  #+begin_src bash
    cd empire-employees/
    npm install
  #+end_src
** Credentials
- Create a file named ~empire-employees/.env~ containing database credentials in the following form
  #+begin_example
    DB_HOST='classmysql.engr.oregonstate.edu'
    DB_USER='cs340_<YOUR_ONID>'
    DB_PASS='<YOUR_PASSWORD>'
    DB_NAME='cs340_<YOUR_ONID>'
  #+end_example
** Setup initial database
- While still in the app directory (~empire-employees/~) Connect to the MySQL shell
  #+begin_src bash
    mysql -u cs340_<YOUR_ONID> -p -h classmysql.engr.oregonstate.edu cs340_<YOUR_ONID>
  #+end_src

- Once authenticated, ~source~ the data definition file, ~empire-employees/group_64_ddq.sql~
  #+begin_example
    source group_64_ddq.sql;
  #+end_example
** Run the app
- Now that the tables have been created via the data definition, it is now possible to run the web app from the entry point ~empire-employees/main.js~.

- Choose an unused port number and start the app. In the below example port 3000 was chosen,
  #+begin_src bash
    node main.js 3000
  #+end_src

# Local Variables:
# before-save-hook: org-make-toc
# End:
